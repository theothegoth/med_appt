{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./BookingConsultation.css';import{useNavigate,useSearchParams}from'react-router-dom';import FindDoctorSearch from'./FindDoctorSearch/FindDoctorSearch';import DoctorCard from'./DoctorCard/DoctorCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";const BookingConsultation=()=>{const[searchParams]=useSearchParams();const[doctors,setDoctors]=useState([]);const[filteredDoctors,setFilteredDoctors]=useState([]);const[isSearched,setIsSearched]=useState(false);const getDoctorsDetails=()=>{fetch('https://api.npoint.io/9a5543d36f1460da2f63').then(res=>res.json()).then(data=>{if(searchParams.get('speciality')){// window.reload()\nconst filtered=data.filter(doctor=>doctor.speciality.toLowerCase()===searchParams.get('speciality').toLowerCase());setFilteredDoctors(filtered);setIsSearched(true);window.reload();}else{setFilteredDoctors([]);setIsSearched(false);}setDoctors(data);}).catch(err=>console.log(err));};const handleSearch=searchText=>{if(searchText===''){setFilteredDoctors([]);setIsSearched(false);}else{const filtered=doctors.filter(doctor=>// \ndoctor.speciality.toLowerCase().includes(searchText.toLowerCase()));setFilteredDoctors(filtered);setIsSearched(true);window.location.reload();}};const navigate=useNavigate();useEffect(()=>{getDoctorsDetails();// const authtoken = sessionStorage.getItem(\"auth-token\");\n// if (!authtoken) {\n//     navigate(\"/login\");\n// }\n},[searchParams]);return/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"searchpage-container\",children:[/*#__PURE__*/_jsx(FindDoctorSearch,{onSearch:handleSearch}),/*#__PURE__*/_jsx(\"div\",{className:\"search-results-container\",children:isSearched?/*#__PURE__*/_jsxs(\"center\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[filteredDoctors.length,\" doctors are available \",searchParams.get('location')]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Book appointments with minimum wait-time & verified doctor details\"}),filteredDoctors.length>0?filteredDoctors.map(doctor=>/*#__PURE__*/_createElement(DoctorCard,{className:\"doctorcard\",...doctor,key:doctor.name})):/*#__PURE__*/_jsx(\"p\",{children:\"No doctors found.\"})]}):''})]})});};export default BookingConsultation;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useSearchParams","FindDoctorSearch","DoctorCard","jsx","_jsx","jsxs","_jsxs","createElement","_createElement","BookingConsultation","searchParams","doctors","setDoctors","filteredDoctors","setFilteredDoctors","isSearched","setIsSearched","getDoctorsDetails","fetch","then","res","json","data","get","filtered","filter","doctor","speciality","toLowerCase","window","reload","catch","err","console","log","handleSearch","searchText","includes","location","navigate","children","className","onSearch","length","map","key","name"],"sources":["/home/project/med_appt/src/Components/BookingConsultation.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './BookingConsultation.css';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport FindDoctorSearch from './FindDoctorSearch/FindDoctorSearch';\nimport DoctorCard from './DoctorCard/DoctorCard';\n\nconst BookingConsultation = () => {\n    const [searchParams] = useSearchParams();\n    const [doctors, setDoctors] = useState([]);\n    const [filteredDoctors, setFilteredDoctors] = useState([]);\n    const [isSearched, setIsSearched] = useState(false);\n    \n    const getDoctorsDetails = () => {\n        fetch('https://api.npoint.io/9a5543d36f1460da2f63')\n        .then(res => res.json())\n        .then(data => {\n            if (searchParams.get('speciality')) {\n                // window.reload()\n                const filtered = data.filter(doctor => doctor.speciality.toLowerCase() === searchParams.get('speciality').toLowerCase());\n\n                setFilteredDoctors(filtered);\n                \n                setIsSearched(true);\n                window.reload()\n            } else {\n                setFilteredDoctors([]);\n                setIsSearched(false);\n            }\n            setDoctors(data);\n        })\n        .catch(err => console.log(err));\n    }\n    const handleSearch = (searchText) => {\n\n        if (searchText === '') {\n            setFilteredDoctors([]);\n            setIsSearched(false);\n            } else {\n                \n            const filtered = doctors.filter(\n                (doctor) =>\n                // \n                doctor.speciality.toLowerCase().includes(searchText.toLowerCase())\n                \n            );\n                \n            setFilteredDoctors(filtered);\n            setIsSearched(true);\n            window.location.reload()\n        }\n    };\n    const navigate = useNavigate();\n    useEffect(() => {\n        getDoctorsDetails();\n        // const authtoken = sessionStorage.getItem(\"auth-token\");\n        // if (!authtoken) {\n        //     navigate(\"/login\");\n        // }\n    }, [searchParams])\n\n    return (\n        <center>\n            <div  className=\"searchpage-container\">\n            <FindDoctorSearch onSearch={handleSearch} />\n            <div className=\"search-results-container\">\n            {isSearched ? (\n                <center>\n                    <h2>{filteredDoctors.length} doctors are available {searchParams.get('location')}</h2>\n                    <h3>Book appointments with minimum wait-time & verified doctor details</h3>\n                    {filteredDoctors.length > 0 ? (\n                    filteredDoctors.map(doctor => <DoctorCard className=\"doctorcard\" {...doctor} key={doctor.name} />)\n                    ) : (\n                    <p>No doctors found.</p>\n                    )}\n                </center>\n                ) : (\n                ''\n                )}\n            </div>\n        </div>\n        </center>\n    )\n}\n\nexport default BookingConsultation"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}